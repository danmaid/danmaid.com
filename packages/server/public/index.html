<!DOCTYPE html>
<html lang="ja">

<head>
  <title>/</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
  <table>
    <tbody id="tbody">
      <template id="row">
        <tr>
          <td id="_id"></td>
          <td><a id="link">go</a></td>
        </tr>
      </template>
    </tbody>
  </table>
  <script type="module">
    const tbody = document.getElementById("tbody");
    const template = document.getElementById("row");

    function add(id) {
      const row = template.content.cloneNode(true);
      row.firstElementChild.id = id;
      row.querySelector("#_id").textContent = id;
      row.querySelector('#link').href = id
      tbody.append(row);
    }

    const res = await fetch("index.json");
    const items = await res.json();
    for (const id of items) add(id);

    const es = new EventSource("");
    es.addEventListener("DELETE", (ev) =>
      document.getElementById(ev.data)?.remove()
    );
    es.addEventListener("POST", async (ev) => add(ev.data));
  </script>
</body>

</html>